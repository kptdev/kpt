# Copyright 2021,2026 The kpt Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

stdErrStripLines:
  - "  Stderr:"
  - "    \"WARNING: The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested\""

stdErr: |
  [RUNNING] "ghcr.io/kptdev/krm-functions-catalog/set-namespace:v0.2.0" on 1 resource(s)
  [PASS] "ghcr.io/kptdev/krm-functions-catalog/set-namespace:v0.2.0" in 0s
  [RUNNING] "ghcr.io/kptdev/krm-functions-catalog/set-annotations:latest" on 1 resource(s)
  [PASS] "ghcr.io/kptdev/krm-functions-catalog/set-annotations:latest" in 0s
  [Results]: [info] metadata.annotations: set annotations: {"foo":"bar"}
  [RUNNING] "ghcr.io/kptdev/krm-functions-catalog/set-labels:v0.1.5"
  [PASS] "ghcr.io/kptdev/krm-functions-catalog/set-labels:v0.1.5" in 0s

stdOut: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: nginx-deployment
    namespace: staging
    labels:
      tier: backend
  spec:
    replicas: 3
    selector:
      matchLabels:
        tier: backend
    template:
      metadata:
        labels:
          tier: backend
  ---
  apiVersion: custom.io/v1
  kind: Custom
  metadata:
    name: custom
    annotations:
      foo: bar
    labels:
      tier: backend
  spec:
    image: nginx:1.2.3
