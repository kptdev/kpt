commands:
  - args:
      - alpha
      - repo
      - register
      - --namespace=rpkg-lifecycle
      - --name=git
      - http://git-server.test-git-namespace.svc.cluster.local:8080.git/@main
  - args:
      - alpha
      - rpkg
      - init
      - --namespace=rpkg-lifecycle
      - git:lifecycle-package:v1
  - args:
      - alpha
      - rpkg
      - propose
      - --namespace=rpkg-lifecycle
      - git:lifecycle-package:v1
    stderr: |
      git:lifecycle-package:v1 proposed
  - args:
      - alpha
      - rpkg
      - get
      - git:lifecycle-package:v1
      - --namespace=rpkg-lifecycle
      - --output=custom-columns=NAME:.metadata.name,LIFECYCLE:.spec.lifecycle
    stdout: |
      NAME                       LIFECYCLE
      git:lifecycle-package:v1   Proposed
  - args:
      - alpha
      - rpkg
      - reject
      - --namespace=rpkg-lifecycle
      - git:lifecycle-package:v1
    stderr: |
      git:lifecycle-package:v1 rejected
  - args:
      - alpha
      - rpkg
      - get
      - git:lifecycle-package:v1
      - --namespace=rpkg-lifecycle
      - --output=custom-columns=NAME:.metadata.name,LIFECYCLE:.spec.lifecycle
    stdout: |
      NAME                       LIFECYCLE
      git:lifecycle-package:v1   Draft
  - args:
      - alpha
      - rpkg
      - propose
      - --namespace=rpkg-lifecycle
      - git:lifecycle-package:v1
    stderr: |
      git:lifecycle-package:v1 proposed
  - args:
      - alpha
      - rpkg
      - get
      - git:lifecycle-package:v1
      - --namespace=rpkg-lifecycle
      - --output=custom-columns=NAME:.metadata.name,LIFECYCLE:.spec.lifecycle
    stdout: |
      NAME                       LIFECYCLE
      git:lifecycle-package:v1   Proposed
  - args:
      - alpha
      - rpkg
      - approve
      - --namespace=rpkg-lifecycle
      - git:lifecycle-package:v1
    stderr: |
      git:lifecycle-package:v1 approved
  - args:
      - alpha
      - rpkg
      - get
      - git:lifecycle-package:v1
      - --namespace=rpkg-lifecycle
      - --output=custom-columns=NAME:.metadata.name,LIFECYCLE:.spec.lifecycle
    stdout: |
      NAME                       LIFECYCLE
      git:lifecycle-package:v1   Final
  - args:
      - alpha
      - rpkg
      - delete
      - git:lifecycle-package:v1
      - --namespace=rpkg-lifecycle
    stderr: |
      git:lifecycle-package:v1 deleted
  - args:
      - alpha
      - rpkg
      - get
      - git:lifecycle-package:v1
      - --namespace=rpkg-lifecycle
      - --output=custom-columns=NAME:.metadata.name,LIFECYCLE:.spec.lifecycle
    stderr: "Error: packagerevisions.porch.kpt.dev \"git:lifecycle-package:v1\" not found \n"
    exitCode: 1
