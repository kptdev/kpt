# cert-manager-basic

## Description

CertManager kpt package.

## Usage

### Fetch the package

```sh
kpt pkg get git@github.com/googlecontainertools/kpt.git/package-examples/cert-manager-basic[@VERSION] cert-manager-basic
```

### View package content

```sh
kpt pkg tree cert-manager-basic
```

### Apply the package

```sh
kpt live init cert-manager-basic
kpt live apply cert-manager-basic --reconcile-timeout=2m --output=table
```

### Steps used to create the package

```sh

mkdir cert-manager-basic
kpt pkg init cert-manager-basic

# fetch the cert-manager uber yaml from the github release
wget https://github.com/cert-manager/cert-manager/releases/download/v1.8.2/cert-manager.yaml

```

Add the following labels to the `Namespace` resource because the next command
uses `labels` to determine the directory and filename of the resources.

```yaml
  labels:
    app: 'cert-manager'
    app.kubernetes.io/name: 'cert-manager'
    app.kubernetes.io/instance: 'cert-manager'
    # Generated labels
    app.kubernetes.io/version: "v1.8.2"
```

```sh
# split out the uber YAML into a component based directory structure.

kubectl-slice -f cert-manager.yaml --template '{{ index "app" .metadata.labels }}/{{.kind | lower}}-{{.metadata.name|dottodash}}.yaml' -o cert-manager-basic
...
...
46 files generated.

# Move the crds in a separate directory
# Generally CRDs will be generated by tools such as controller-gen and it helps
# to keep them separately from other resources. It will help us model our package
# authoring solution.
mkdir cert-manager-basic/crds
mv cert-manager-basic/cert-manager/customresourcedefinition-* cert-manager-basic/crds/
```
